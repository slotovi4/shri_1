<!DOCTYPE html>
<html lang="ru" class="Html">

<head>
    <title>Яндекс Дом</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="robots" content="noindex">
    <link rel="stylesheet" href="css/common.min.css">
    <link rel="stylesheet" href="css/desktop.min.css" media="(min-width: 1056px)" />
    <link rel="stylesheet" href="css/touch.min.css" media="(max-width: 900px)" />
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="framework/frame.min.js"></script>
</head>

<body>

    <header></header>

    <main class="Container"></main>

    <footer></footer>

    <template class="EventTemplate">
        <section class="Event">
            <div class="Event-Close"></div>
            <div class="EventHeader">
                <img class="Event-Icon" src="" alt="">
                <h3 class="Event-Title"></h3>
            </div>

            <div class="EventSystem">
                <span class="Event-Source"></span>
                <span class="Event-Time"></span>
            </div>

            <div class="EventInfo">
                <span class="Event-Desc"></span>
                <div class="EventClimate">
                    <span class="Event-Temperature"></span>
                    <span class="Event-Humidity"></span>
                </div>
                <div class="EventMusic">
                    <div class="EventMusicTracker">
                        <div class="EventMusic-Image"></div>
                        <span class="EventMusic-Name"></span>
                        <div class="EventMusic-Track">
                            <span class="EventMusic-Time"></span>
                        </div>
                    </div>

                    <div class="EventMusicControlls">
                        <div class="EventMusicControlls-Prev"></div>
                        <div class="EventMusicControlls-Next"></div>
                        <div class="EventMusicControlls-Volume"></div>
                        <div class="EventMusicControlls-VolumeValue"></div>
                    </div>
                </div>
                <div class="EventButtons">
                    <span class="EventButtons-Button EventButtons-Button_active"></span>
                    <span class="EventButtons-Button EventButtons-Button_inactive"></span>
                </div>
                <img class="Event-Image" src="" alt="">
                <div class="EventCam">
                    <div class="EventCam-Image"></div>
                </div>
                <div class="EventCamInfo">
                    <span class="EventCamInfo-Zoom"></span>
                    <span class="EventCamInfo-Bright"></span>
                </div>
            </div>

            <div class="Event-Continue"></div>
        </section>
    </template>

    <script src="js/renderComponents.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let request = new XMLHttpRequest();
            request.open("GET", '/dist/data/videos.json', false);

            request.onload = function () {
                if (request.status >= 200 && request.status < 400) {
                    let data = JSON.parse(request.responseText);
                    let videos = data.videos;

                    videos.forEach(function (el) {
                        let id = el.id,
                            url = el.url;

                        initVideo(document.getElementById(id), url);
                        canvasVideo(id);
                        canvasVideoSound(id);
                    });

                    openVideo();

                } else {
                    throw "Error: data not received";
                }
            };

            request.send();

            if (request.status != 200) {
                alert(request.status + ": " + request.statusText);
            }
        });
    </script>
</body>

</html>