<!DOCTYPE html>
<html lang="ru" class="Html">

<head>
    <title>Яндекс Дом</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="robots" content="noindex">
    <link rel="stylesheet" href="css/common.min.css">
    <link rel="stylesheet" href="css/desktop.min.css" media="(min-width: 1056px)" />
    <link rel="stylesheet" href="css/touch.min.css" media="(max-width: 900px)" />
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="https://unpkg.com/react@16/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@16/umd/react-dom.development.js"></script>
    <script src="framework/frame.min.js"></script>
</head>

<body>

    <header></header>
    <main class="Container"></main>
    <footer></footer>


    <script src="js/renderComponents.js"></script>
    <script src="js/main.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            let request = new XMLHttpRequest();
            request.open("GET", '/dist/data/videos.json', false);

            request.onload = function () {
                if (request.status >= 200 && request.status < 400) {
                    let data = JSON.parse(request.responseText);
                    let videos = data.videos;

                    videos.forEach(function (el) {
                        let id = el.id,
                            url = el.url;

                        initVideo(document.getElementById(id), url);
                        canvasVideo(id);
                        canvasVideoSound(id);
                    });

                    openVideo();

                } else {
                    throw "Error: data not received";
                }
            };

            request.send();

            if (request.status != 200) {
                alert(request.status + ": " + request.statusText);
            }
        });
    </script>
</body>

</html>