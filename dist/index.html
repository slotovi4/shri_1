<!DOCTYPE html>
<html lang="ru" class="Html">

<head>
    <title>Яндекс Дом</title>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <meta name="robots" content="noindex">
    <link rel="stylesheet" href="css/common.min.css">
    <link rel="stylesheet" href="css/desktop.min.css" media="(min-width: 1056px)" />
    <link rel="stylesheet" href="css/touch.min.css" media="(max-width: 900px)" />
    <link rel="shortcut icon" href="favicon.png" type="image/png">
    <script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>
    <script src="framework/frame.min.js"></script>
</head>

<body>

    <header class="Header">
        <div class="Header-Logo"></div>
        <div class="Header-Menu">
            <a class="Header-Link Header-Link_active" data-page-title="Лента событий" data-page="events.json" href="#">События</a>
            <a class="Header-Link" href="#">Сводка</a>
            <a class="Header-Link" href="#">Устройства</a>
            <a class="Header-Link" href="#">Сценарии</a>
            <a class="Header-Link" data-page-title="Видеонаблюдение" data-page="videos.json" href="#">Видеонаблюдение</a>
        </div>
        <div class="HeaderMobileBtn">
            <div class="HeaderMobileBtn-Line"></div>
            <div class="HeaderMobileBtn-Line"></div>
            <div class="HeaderMobileBtn-Line"></div>
        </div>
    </header>

    <main class="Container">
        <h1 class="Container-Title"></h1>
    </main>

    <footer class="Footer">
        <div class="Footer-LeftSection">
            <a href="#" class="Footer-Text">Помощь</a>
            <a href="#" class="Footer-Text">Обратная связь</a>
            <a href="#" class="Footer-Text">Разработчикам</a>
            <a href="#" class="Footer-Text">Условия использования</a>
            <a href="license.pdf" class="Footer-Text">Авторские права</a>
        </div>
        <div class="Footer-RightSection">
            <span class="Footer-Text">© 2001–2017 ООО «Яндекс»</span>
        </div>
    </footer>

    <template class="EventTemplate">
        <section class="Event">
            <div class="Event-Close"></div>
            <div class="EventHeader">
                <img class="Event-Icon" src="" alt="">
                <h3 class="Event-Title"></h3>
            </div>

            <div class="EventSystem">
                <span class="Event-Source"></span>
                <span class="Event-Time"></span>
            </div>

            <div class="EventInfo">
                <span class="Event-Desc"></span>
                <div class="EventClimate">
                    <span class="Event-Temperature"></span>
                    <span class="Event-Humidity"></span>
                </div>
                <div class="EventMusic">
                    <div class="EventMusicTracker">
                        <div class="EventMusic-Image"></div>
                        <span class="EventMusic-Name"></span>
                        <div class="EventMusic-Track">
                            <span class="EventMusic-Time"></span>
                        </div>
                    </div>

                    <div class="EventMusicControlls">
                        <div class="EventMusicControlls-Prev"></div>
                        <div class="EventMusicControlls-Next"></div>
                        <div class="EventMusicControlls-Volume"></div>
                        <div class="EventMusicControlls-VolumeValue"></div>
                    </div>
                </div>
                <div class="EventButtons">
                    <span class="EventButtons-Button EventButtons-Button_active"></span>
                    <span class="EventButtons-Button EventButtons-Button_inactive"></span>
                </div>
                <img class="Event-Image" src="" alt="">
                <div class="EventCam">
                    <div class="EventCam-Image"></div>
                </div>
                <div class="EventCamInfo">
                    <span class="EventCamInfo-Zoom"></span>
                    <span class="EventCamInfo-Bright"></span>
                </div>
            </div>

            <div class="Event-Continue"></div>
        </section>
    </template>

    <template class="VideoTemplate">
        <section class="CanvVideoBlock">
            <video class="Container-Video" poster="img/yandex.jpg" controls="controls" loop="loop" muted autoplay></video>
            <div class="CanvVideoBlock-CanvasBlock">
                <span class="CanvVideoBlock-Info"></span>
                <div class="CanvVideoBlock-SoundVolume"></div>
                <canvas class="CanvVideoBlock-Video"></canvas>
                <canvas class="CanvVideoBlock-CanvasMove"></canvas>
                <div class="CanvVideoBlock-ControllBlock">
                    <span class="CanvVideoBlock-Text">Яркость</span>
                    <input class="CanvVideoBlock-Luminance" type="range" value="5" min="0" max="10">
                    <span class="CanvVideoBlock-Text">Контраст</span>
                    <input class="CanvVideoBlock-Contrast" type="range" value="1" min="1" max="5">
                    <span class="CanvVideoBlock-Button">Все камеры</span>
                    <div class="CanvVideoBlock-SoundMute">♪</div>
                </div>
            </div>
        </section>
    </template>

    <script src="js/main.js"></script>
    <script>
        document.addEventListener("DOMContentLoaded", function () {
            //Init page
            dataDispatcher.dispatch([{
                actionType: "setDefaultPage",
                data: {
                    pageName: "События",
                    dataName: "events.json",
                    dataPath: "/dist/data/",
                    dataFunc: templateEngine
                }
            }, {
                actionType: "setPageTitle",
                data: {
                    el: ".Container-Title",
                    title: "Лента событий"
                }
            }
            ]);

            //New page
            const menuLinks = document.querySelectorAll('.Header-Link');
            menuLinks.forEach(link => {
                link.addEventListener('click', function () {
                    clearActiveLink(menuLinks);
                    link.classList.add('Header-Link_active');

                    let pageData = link.getAttribute('data-page');
                    let pageTitle = link.getAttribute('data-page-title');
                    let currentPage = dataDispatcher.getCurrentPage();

                    if (pageData) {
                        dataDispatcher.dispatch([{
                            actionType: "setNewPage",
                            data: {
                                pageName: link.textContent,
                                dataName: pageData,
                                dataPath: "/dist/data/",
                                dataFunc: templateEngine
                            }
                        }]);
                    }

                    if (pageTitle) {
                        dataDispatcher.dispatch([{
                            actionType: "setPageTitle",
                            data: {
                                el: ".Container-Title",
                                title: pageTitle
                            }
                        }]);
                    }
                });
            });

            function clearActiveLink(links) {
                links.forEach(item => {
                    if (item.classList.contains('Header-Link_active'))
                        item.classList.remove('Header-Link_active');
                });
            }

        });
    </script>
</body>

</html>